---
title: "Untitled"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r, message=FALSE, warning=FALSE}
library(tidyverse)
library(rio)
library(sf)
library(stars)
library(raster)
library(terra)
```


```{r}
sal <- import("01_datos/Conductividad_electrica.csv")
```

```{r}
head(sal)
```

```{r}
raster_list <- list.files(path = "01_datos/covs", full.names = TRUE)
```

```{r}
raster_list
```


### stars

```{r}
rasters <- read_stars(raster_list)
```


```{r}
rasters
```


```{r}
cr <- st_read("01_datos/mask/CR_cg.gpkg")
```
```{r}
st_crs(cr)
```

```{r}
plot(rasters, axes = TRUE)
```


```{r}
rasters_mask <- rasters[cr, crop = TRUE]
```

```{r}
plot(rasters_mask[100], axes = TRUE)
```


***

### terra

```{r}
raster_list <- list.files(path = "01_datos/prueba", full.names = TRUE)
```


```{r}
s <- stack(raster_list)
```

```{r}
s
```

```{r}
s_crop <- crop(s, cr)
```

```{r}
s_mask <- mask(s_crop, cr)
```

```{r}
plot(s_mask)
```





